package swapper.intentions.tropical.module.exploit;

import com.google.common.eventbus.Subscribe;

import net.minecraft.item.ItemBow;
import net.minecraft.network.play.client.C03PacketPlayer;
import net.minecraft.network.play.client.C07PacketPlayerDigging;
import net.minecraft.network.play.client.C08PacketPlayerBlockPlacement;
import net.minecraft.util.BlockPos;
import net.minecraft.util.EnumFacing;
import swapper.intentions.tropical.event.impl.PacketEvent;
import swapper.intentions.tropical.event.impl.UpdateEvent;
import swapper.intentions.tropical.module.Module;
import swapper.intentions.tropical.utils.PacketUtil;

public class FastBow extends Module {
	public FastBow() {
		super("FastBow", "shot bow fast", 0x0, Category.EXPLOIT);
	}

	@Override
	protected void onEnable() {
		// TODO Auto-generated method stub
		
	}
	
	@Subscribe
	public void onUpdate(UpdateEvent e) {
		if(!e.isPre())
			return;
		
		if(mc.thePlayer.isUsingItem() && mc.thePlayer.getHeldItem().getItem() instanceof ItemBow) {
			mc.thePlayer.sendQueue.addToSendQueueNoEvent(new C07PacketPlayerDigging(C07PacketPlayerDigging.Action.RELEASE_USE_ITEM, BlockPos.ORIGIN, EnumFacing.DOWN));
			mc.thePlayer.sendQueue.addToSendQueueNoEvent(new C08PacketPlayerBlockPlacement(mc.thePlayer.getHeldItem()));
			PacketUtil.sendPacketNoEvent(3, new C03PacketPlayer());
		}
	}
	
	@Subscribe
	public void onPacket(PacketEvent e) {

	}
	
	@Override
	protected void onDisable() {
		// TODO Auto-generated method stub
		
	}
}
